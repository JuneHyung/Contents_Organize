# ğŸ³ Vue Test Utils

í…ŒìŠ¤íŒ… ë³´ì¡° ë¼ì´ë¸ŒëŸ¬ë¦¬



## Vue-CLI(3.xë²„ì „ ì´ìƒ)ì—ì„œ ì„¤ì¹˜ ë°©ë²•

vue createì‹œ `Manually select features`ì—ì„œ ì˜µì…˜ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŒ.(Unit Testing)



## Vue-CLI(2.x ë²„ì „ ì´í•˜)ì—ì„œ ì„¤ì¹˜ ë°©ë²•.

```shell
npm install jest @vue/test-utils vue-jest babel-jest --save-dev
```

ìœ„ ëª…ë ¹ì–´ë¡œ `vue test util`, `jest`, `vue-jest`, `babel-jest` 4ê°œì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë¨.



### babel ì‚¬ìš©

```shell
npm install @babel/core @babel/preset-env babel-core@^7.0.0-bridge.0 --save-dev
```



### Webpackì‚¬ìš©

```json
// package.json
{
  "jest": {
    "moduleNameMapper": {
      // ë³„ì¹­ @(í”„ë¡œì íŠ¸/src) ì‚¬ìš©í•˜ì—¬ í•˜ìœ„ ê²½ë¡œì˜ íŒŒì¼ì„ ë§µí•‘í•©ë‹ˆë‹¤
      "^@/(.*)$": "<rootDir>/src/$1"
    }
  }
}
```

```javascript
// jest.config.js
module.exports = {
  moduleNameMapper: {
    // ë³„ì¹­ @(í”„ë¡œì íŠ¸/src) ì‚¬ìš©í•˜ì—¬ í•˜ìœ„ ê²½ë¡œì˜ íŒŒì¼ì„ ë§µí•‘í•©ë‹ˆë‹¤
    '^@/(.*)$': '<rootDir>/src/$1'
  },
};
 
```

> aliasë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì œìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •ì—ë„ ë™ì¼í•˜ê²Œ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•¨.



### ì½”ë“œ ì»¤ë²„ë¦¬ì§€(Code Coverage)

JestëŠ” í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì§€í‘œë³´ê³ ì„œë„ ìƒì„±ì´ ê°€ëŠ¥.

```json
// packages.json
{
  "jest": {
    "collectCoverage": true,
    "collectCoverageFrom": [
      "**/*.{js,vue}",
      "!**/node_modules/**"
    ]
  }
}
```

```javascript
// jest.config.js
module.exports = {
  collectCoverage: true,
  collectCoverageFrom: [
    '**/*.{js,vue}',
    '!**/node_modules/**'
  ]
};
```



**ê²°ê³¼**

```shell
 PASS  tests/unit/example.spec.js
  HelloWorld.vue
    âˆš renders props.msg when passed (14ms)

----------|----------|----------|----------|----------|-------------------|
File      |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------|----------|----------|----------|----------|-------------------|
All files |        0 |        0 |        0 |        0 |                   |
----------|----------|----------|----------|----------|-------------------|
Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.628s
Ran all test suites.
Done in 2.46s.
```

ê° ì»¤ë²„ë¦¬ì§€ í•­ëª©ì˜ ì„¤ëª…

- **Stmts**: ìµœì†Œ í•œ ë²ˆ ì´ìƒ ì‹¤í–‰ëœ ëª…ë ¹ë¬¸(ë³€ìˆ˜ì— ê°’ ì €ì¥, í•¨ìˆ˜ í˜¸ì¶œ ë“±) ì½”ë“œì˜ ë¹„ìœ¨
- **Branch**: ìµœì†Œ í•œ ë²ˆ ì´ìƒ if, switchì™€ ê°™ì€ ë¶„ê¸° ì¡°ê±´ì´ ì¶©ì¡±ëœ ë¹„ìœ¨
- **Funcs**: ìµœì†Œ í•œ ë²ˆ ì´ìƒ í˜¸ì¶œëœ í•¨ìˆ˜ì˜ ë¹„ìœ¨
- **Lines**: ìµœì†Œ í•œ ë²ˆ ì´ìƒ ì‹¤í–‰ëœ ì½”ë“œ ë¼ì¸ì˜ ë¹„ìœ¨
- **Uncovered Line**: ì½”ë“œ ì»¤ë²„ë¦¬ì§€ì— ì¸¡ì •ë˜ì§€ ì•Šì€ ì½”ë“œ ë¼ì¸ ìˆ˜





## Jest í™˜ê²½ì„¤ì •

`pacakge.json`ë˜ëŠ” `jest.config.js`ì„¤ì •

ğŸ“˜ ì°¸ê³  :  [Jest ê³µì‹ ë¬¸ì„œì˜ Configuring Jest](https://jestjs.io/docs/configuration)

```javascript
{
  // ...
  "jest": {
    // vue-cli í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •ì„ ì‚¬ìš©í•©ë‹ˆë‹¤
    // ì£¼ì˜! preset ì§€ì • í›„ ì•„ë˜ì™€ ê°™ì´ ê°ê° ë‹¤ì‹œ ì„¤ì •í•˜ëŠ” ê²½ìš°, ìƒˆë¡œ ì„¤ì •í•œ ë‚´ìš©ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤
    "preset": "@vue/cli-plugin-unit-jest",
    "moduleFileExtensions": [
      "js",
      "json",
      // ëª¨ë“  vue íŒŒì¼(`*.vue`)ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Jestì—ê²Œ ì•Œë ¤ì¤ë‹ˆë‹¤
      "vue"
    ],
    "transform": {
      // `vue-jest`ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  vue íŒŒì¼(`*.vue`)ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤
      ".*\\.(vue)$": "vue-jest",
      // `babel-jest`ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  js íŒŒì¼(`*.js`)ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤
      ".*\\.(js)$": "babel-jest",
    },
    "moduleNameMapper": {
      // ë³„ì¹­ @(í”„ë¡œì íŠ¸/src) ì‚¬ìš©í•˜ì—¬ í•˜ìœ„ ê²½ë¡œì˜ íŒŒì¼ì„ ë§µí•‘í•©ë‹ˆë‹¤
      "^@/(.*)$": "<rootDir>/src/$1"
    },
    "testMatch": [
      // __tests__ ê²½ë¡œ í•˜ìœ„ì— ìˆëŠ” ëª¨ë“  js/ts/jsx/tsx íŒŒì¼ì„ í…ŒìŠ¤íŠ¸ ëŒ€ìƒìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤
      "**/__tests__/**/*.[jt]s?(x)",
      // íŒŒì¼ ì´ë¦„ì— 'xxx.spec' ë˜ëŠ” 'xxx.test'ë¼ëŠ” ì´ë¦„ì´ ë¶™ì—¬ì¸ ëª¨ë“  js/ts/jsx/tsx íŒŒì¼ì„ í…ŒìŠ¤íŠ¸ ëŒ€ìƒìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤
      "**/?(*.)+(spec|test).[jt]s?(x)"
    ],
    // node_modules ê²½ë¡œ í•˜ìœ„ì— ìˆëŠ” ëª¨ë“  í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ ëŒ€ìƒì—ì„œ ì œì™¸í•©ë‹ˆë‹¤
    "testPathIgnorePatterns": ["/node_modules/"],
    "collectCoverage": true,
    "collectCoverageFrom": [
      "**/*.{js,vue}",
      "!**/node_modules/**"
    ]
  }
}
```

