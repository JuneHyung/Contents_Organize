# Advanced

## 웹팩 실행 모드 - mode

웹팩 4버전부터 mode라는 개념이 추가됨.

```js
module.exports = {
  mode: 'none',
  entry: '',
  // ...
}
```

mode를 정의하면 웹팩의 실행 모드가 설정됨.

* none : 모드 설정 X
* development : 개발 모드
* production : 배포 모드

> ❗ 미설정시 production이 기본값.

development면, 개발자들이 좀 더 보기편하게 웹팩 로그나 결과물이 보여지고,

production이면 성능 최적화를 위해 기보넞ㄱ인 파일 압축 등의 빌드 과정이 추가됨.



## 실행 모드에 따라 웹팩 설정 달리하기

실제 웹 애플리케이션을 개발할 때는 보통 하래와 같이 2가지 케이스로 구분하여 작업해야함.

* 개발 시 사용할 웹팩 설정
* 개발이 끝나고 배포할 때 사용할 웹팩 설정

웹팩 설정 파일이 1개인 상태에서 실행 모드에 따라 특정 설정을 적용하는 방법

```js
// webpack.config.js
module.exports = (env) => {
  let entryPath = env.mode === 'production'
    ? './public/index.js'
    : './src/index.js';

  return {
    entry: entryPath,
    output: {},
    // ...
  }
}
```

```json
// package.json
{
  "build": "webpack",
  "development": "npm run build -- --env.mode=development",
  "production": "npm run build -- --env.mode=production"
}
```

위 코드를 보면 웹팩 설정 파일의 방식이 객체에서 함수 형식으로 바뀌었다.

```js
// 기존
module.exports = {};
// 현재
module.exports = () => {};
```



함수에 넘겨준 `env`인자는 환경 변수를 의미하며 웹팩을 실행할 때 실행 옵션으로 넘겨줄 수 있음.

```shell
webpack --env.a = 10
```

npm커스텀 명령어로 관리한다면 아래처럼 할 수 있다.

```json
{
	"build": "webpack --env.a=10"
}
```

위 같은 방식으로 실행모드에 따라 웹팩설정을 다르게 적용 가능.